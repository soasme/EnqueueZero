<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>EnqueueZero Techshack 2019-09 | Enqueue Zero</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Enqueue Zero is publishing code principles.">
    
    <link rel="preload" href="/assets/css/0.styles.472f46d1.css" as="style"><link rel="preload" href="/assets/js/app.26662bcd.js" as="script"><link rel="preload" href="/assets/js/6.d2240214.js" as="script"><link rel="preload" href="/assets/js/157.12f4dc82.js" as="script"><link rel="prefetch" href="/assets/js/1.f7157d85.js"><link rel="prefetch" href="/assets/js/10.bb89159d.js"><link rel="prefetch" href="/assets/js/100.696fc0f0.js"><link rel="prefetch" href="/assets/js/101.a1c3f849.js"><link rel="prefetch" href="/assets/js/102.bfa743be.js"><link rel="prefetch" href="/assets/js/103.694af51d.js"><link rel="prefetch" href="/assets/js/104.c21c3757.js"><link rel="prefetch" href="/assets/js/105.d5841585.js"><link rel="prefetch" href="/assets/js/106.9cf7fa00.js"><link rel="prefetch" href="/assets/js/107.1ec93d70.js"><link rel="prefetch" href="/assets/js/108.0b8763b2.js"><link rel="prefetch" href="/assets/js/109.e7196d2e.js"><link rel="prefetch" href="/assets/js/11.e30c030f.js"><link rel="prefetch" href="/assets/js/110.a6dd1b2d.js"><link rel="prefetch" href="/assets/js/111.77cce519.js"><link rel="prefetch" href="/assets/js/112.70165eb2.js"><link rel="prefetch" href="/assets/js/113.3fa50ee2.js"><link rel="prefetch" href="/assets/js/114.31c8c10f.js"><link rel="prefetch" href="/assets/js/115.af04f95c.js"><link rel="prefetch" href="/assets/js/116.457c2566.js"><link rel="prefetch" href="/assets/js/117.c43e188a.js"><link rel="prefetch" href="/assets/js/118.8cf2c53e.js"><link rel="prefetch" href="/assets/js/119.bd688ff9.js"><link rel="prefetch" href="/assets/js/12.3e81efff.js"><link rel="prefetch" href="/assets/js/120.dc1164f5.js"><link rel="prefetch" href="/assets/js/121.f8bd20ba.js"><link rel="prefetch" href="/assets/js/122.58c1b292.js"><link rel="prefetch" href="/assets/js/123.3ab17f6c.js"><link rel="prefetch" href="/assets/js/124.79a8fefc.js"><link rel="prefetch" href="/assets/js/125.bb87430b.js"><link rel="prefetch" href="/assets/js/126.de1343ef.js"><link rel="prefetch" href="/assets/js/127.d66cf797.js"><link rel="prefetch" href="/assets/js/128.c2ce57e8.js"><link rel="prefetch" href="/assets/js/129.e0515a98.js"><link rel="prefetch" href="/assets/js/13.3ae4e3c9.js"><link rel="prefetch" href="/assets/js/130.b198674a.js"><link rel="prefetch" href="/assets/js/131.b44003aa.js"><link rel="prefetch" href="/assets/js/132.9ce0efcd.js"><link rel="prefetch" href="/assets/js/133.c5ff5656.js"><link rel="prefetch" href="/assets/js/134.27dfad96.js"><link rel="prefetch" href="/assets/js/135.1a6c5976.js"><link rel="prefetch" href="/assets/js/136.a40474aa.js"><link rel="prefetch" href="/assets/js/137.337a587b.js"><link rel="prefetch" href="/assets/js/138.c0a1d2f5.js"><link rel="prefetch" href="/assets/js/139.789324e5.js"><link rel="prefetch" href="/assets/js/14.6745f1f0.js"><link rel="prefetch" href="/assets/js/140.0f6046b7.js"><link rel="prefetch" href="/assets/js/141.ca8677a9.js"><link rel="prefetch" href="/assets/js/142.7cd41612.js"><link rel="prefetch" href="/assets/js/143.4e06cdc6.js"><link rel="prefetch" href="/assets/js/144.30a011d9.js"><link rel="prefetch" href="/assets/js/145.616e4d0c.js"><link rel="prefetch" href="/assets/js/146.9f8b8212.js"><link rel="prefetch" href="/assets/js/147.aa478e29.js"><link rel="prefetch" href="/assets/js/148.3114d5cd.js"><link rel="prefetch" href="/assets/js/149.f8711773.js"><link rel="prefetch" href="/assets/js/15.2f559067.js"><link rel="prefetch" href="/assets/js/150.66da4609.js"><link rel="prefetch" href="/assets/js/151.9a722cf9.js"><link rel="prefetch" href="/assets/js/152.c625b811.js"><link rel="prefetch" href="/assets/js/153.6f67989f.js"><link rel="prefetch" href="/assets/js/154.8d3771fd.js"><link rel="prefetch" href="/assets/js/155.db2eb76a.js"><link rel="prefetch" href="/assets/js/156.d5dd02f5.js"><link rel="prefetch" href="/assets/js/158.106505d8.js"><link rel="prefetch" href="/assets/js/159.a2dbf072.js"><link rel="prefetch" href="/assets/js/16.b9adde67.js"><link rel="prefetch" href="/assets/js/160.3145ef30.js"><link rel="prefetch" href="/assets/js/161.25da45f5.js"><link rel="prefetch" href="/assets/js/162.a65448a4.js"><link rel="prefetch" href="/assets/js/163.f07fa25d.js"><link rel="prefetch" href="/assets/js/164.467c6d5c.js"><link rel="prefetch" href="/assets/js/17.01834c30.js"><link rel="prefetch" href="/assets/js/18.9956aed9.js"><link rel="prefetch" href="/assets/js/19.d99e88b1.js"><link rel="prefetch" href="/assets/js/2.0d8a973f.js"><link rel="prefetch" href="/assets/js/20.8ce58444.js"><link rel="prefetch" href="/assets/js/21.8e95e990.js"><link rel="prefetch" href="/assets/js/22.46dc304c.js"><link rel="prefetch" href="/assets/js/23.1ad9ea02.js"><link rel="prefetch" href="/assets/js/24.32437043.js"><link rel="prefetch" href="/assets/js/25.e3764fbe.js"><link rel="prefetch" href="/assets/js/26.e4eec541.js"><link rel="prefetch" href="/assets/js/27.54c6db2e.js"><link rel="prefetch" href="/assets/js/28.8dc6cb87.js"><link rel="prefetch" href="/assets/js/29.4d3624fc.js"><link rel="prefetch" href="/assets/js/3.dd706b41.js"><link rel="prefetch" href="/assets/js/30.c4d8ab26.js"><link rel="prefetch" href="/assets/js/31.d28673cb.js"><link rel="prefetch" href="/assets/js/32.51d979f3.js"><link rel="prefetch" href="/assets/js/33.7359ba2a.js"><link rel="prefetch" href="/assets/js/34.c3f19c8f.js"><link rel="prefetch" href="/assets/js/35.1613123f.js"><link rel="prefetch" href="/assets/js/36.5a82821a.js"><link rel="prefetch" href="/assets/js/37.b95059f5.js"><link rel="prefetch" href="/assets/js/38.67082dba.js"><link rel="prefetch" href="/assets/js/39.f9e197d7.js"><link rel="prefetch" href="/assets/js/4.29da6077.js"><link rel="prefetch" href="/assets/js/40.309fa7cc.js"><link rel="prefetch" href="/assets/js/41.12e2904c.js"><link rel="prefetch" href="/assets/js/42.60c54b7c.js"><link rel="prefetch" href="/assets/js/43.93d5d55c.js"><link rel="prefetch" href="/assets/js/44.c7972aa3.js"><link rel="prefetch" href="/assets/js/45.0e7f822e.js"><link rel="prefetch" href="/assets/js/46.6646cc92.js"><link rel="prefetch" href="/assets/js/47.ef2ff153.js"><link rel="prefetch" href="/assets/js/48.aba7bfcd.js"><link rel="prefetch" href="/assets/js/49.76ce0dd5.js"><link rel="prefetch" href="/assets/js/50.bfd5ce8a.js"><link rel="prefetch" href="/assets/js/51.78e9f09c.js"><link rel="prefetch" href="/assets/js/52.d84bf105.js"><link rel="prefetch" href="/assets/js/53.63ae3ba7.js"><link rel="prefetch" href="/assets/js/54.c13091c1.js"><link rel="prefetch" href="/assets/js/55.0fd04d7d.js"><link rel="prefetch" href="/assets/js/56.30c3e036.js"><link rel="prefetch" href="/assets/js/57.88f684ac.js"><link rel="prefetch" href="/assets/js/58.b0273999.js"><link rel="prefetch" href="/assets/js/59.2bd4017a.js"><link rel="prefetch" href="/assets/js/60.cb5e31cd.js"><link rel="prefetch" href="/assets/js/61.78c24020.js"><link rel="prefetch" href="/assets/js/62.ed7bb122.js"><link rel="prefetch" href="/assets/js/63.6dc67c03.js"><link rel="prefetch" href="/assets/js/64.ba48b753.js"><link rel="prefetch" href="/assets/js/65.95fb6a85.js"><link rel="prefetch" href="/assets/js/66.cf7b0f4b.js"><link rel="prefetch" href="/assets/js/67.135e02b9.js"><link rel="prefetch" href="/assets/js/68.692785cb.js"><link rel="prefetch" href="/assets/js/69.71acc6d9.js"><link rel="prefetch" href="/assets/js/7.e6dfaa84.js"><link rel="prefetch" href="/assets/js/70.9330fa95.js"><link rel="prefetch" href="/assets/js/71.323daa7b.js"><link rel="prefetch" href="/assets/js/72.0a1f652c.js"><link rel="prefetch" href="/assets/js/73.58f8d79d.js"><link rel="prefetch" href="/assets/js/74.c79161f6.js"><link rel="prefetch" href="/assets/js/75.ebdc4060.js"><link rel="prefetch" href="/assets/js/76.d7c6a683.js"><link rel="prefetch" href="/assets/js/77.1c74ae52.js"><link rel="prefetch" href="/assets/js/78.1435c08f.js"><link rel="prefetch" href="/assets/js/79.550e023e.js"><link rel="prefetch" href="/assets/js/8.9d730b63.js"><link rel="prefetch" href="/assets/js/80.0fcde753.js"><link rel="prefetch" href="/assets/js/81.54ad9ad6.js"><link rel="prefetch" href="/assets/js/82.106f6213.js"><link rel="prefetch" href="/assets/js/83.eb1f77af.js"><link rel="prefetch" href="/assets/js/84.dc27d377.js"><link rel="prefetch" href="/assets/js/85.952de193.js"><link rel="prefetch" href="/assets/js/86.849ef641.js"><link rel="prefetch" href="/assets/js/87.ba839e63.js"><link rel="prefetch" href="/assets/js/88.55c67120.js"><link rel="prefetch" href="/assets/js/89.2b92f963.js"><link rel="prefetch" href="/assets/js/9.4f13d7d8.js"><link rel="prefetch" href="/assets/js/90.599d1ee9.js"><link rel="prefetch" href="/assets/js/91.ca49947d.js"><link rel="prefetch" href="/assets/js/92.fee804a1.js"><link rel="prefetch" href="/assets/js/93.38edda54.js"><link rel="prefetch" href="/assets/js/94.2a5af489.js"><link rel="prefetch" href="/assets/js/95.694d7882.js"><link rel="prefetch" href="/assets/js/96.dbae4a47.js"><link rel="prefetch" href="/assets/js/97.f635273c.js"><link rel="prefetch" href="/assets/js/98.4b13da17.js"><link rel="prefetch" href="/assets/js/99.1c228ad5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.472f46d1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Enqueue Zero</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/soasme/enqueuezero" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/soasme/enqueuezero" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>EnqueueZero Techshack 2019-09</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/techshack.weekly/2019-09.html#intro-to-redis-cluster-sharding-advantages-limitations-deploying-client-connections" class="sidebar-link">Intro to Redis Cluster Sharding – Advantages, Limitations, Deploying &amp; Client Connections</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/techshack.weekly/2019-09.html#an-async-framework-within-a-single-tweet" class="sidebar-link">An async &quot;framework&quot; within a single Tweet</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/techshack.weekly/2019-09.html#the-right-way-to-bundle-your-assets-for-faster-sites-over-http-2" class="sidebar-link">The Right Way to Bundle Your Assets for Faster Sites over HTTP/2</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/techshack.weekly/2019-09.html#openssl-strategic-architecture" class="sidebar-link">OpenSSL Strategic Architecture</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/techshack.weekly/2019-09.html#understanding-real-world-concurrency-bugs-in-go" class="sidebar-link">Understanding Real-World Concurrency Bugs in Go</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/techshack.weekly/2019-09.html#best-deep-learning-books-updated-for-2019" class="sidebar-link">Best Deep Learning Books: Updated for 2019</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/techshack.weekly/2019-09.html#your-migrations-are-bad-and-you-should-feel-bad" class="sidebar-link">Your migrations are bad, and you should feel bad</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/techshack.weekly/2019-09.html#how-discord-scaled-elixir-to-5-000-000-concurrent-users" class="sidebar-link">How Discord Scaled Elixir to 5,000,000 Concurrent Users</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/techshack.weekly/2019-09.html#cloud-native-application-architecture" class="sidebar-link">Cloud Native Application Architecture</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="enqueuezero-techshack-2019-09"><a href="#enqueuezero-techshack-2019-09" class="header-anchor">#</a> EnqueueZero Techshack 2019-09</h1> <h2 id="intro-to-redis-cluster-sharding-advantages-limitations-deploying-client-connections"><a href="#intro-to-redis-cluster-sharding-advantages-limitations-deploying-client-connections" class="header-anchor">#</a> Intro to Redis Cluster Sharding – Advantages, Limitations, Deploying &amp; Client Connections</h2> <p><a href="http://highscalability.com/blog/2019/2/19/intro-to-redis-cluster-sharding-advantages-limitations-deplo.html" target="_blank" rel="noopener noreferrer">highscalability.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Redis Cluster is the native sharding implementation available within Redis that allows you to automatically distribute your data across multiple nodes without having to rely on external tools and utilities.</p> <p>The entire keyspace in Redis Clusters is divided in 16384 slots (called hash slots) and these slots are assigned to multiple Redis nodes. A given key is mapped to one of these slots, and the hash slot for a key is computed as: <code>HASH_SLOT = CRC16(key) mod 16384</code>. Multi-key operations are supported on Redis Clusters as long as all the keys involved in a single command execution belong to the same hash slot.</p> <p>The benefits of Redis Cluster are high performance, high availability, horizontal scalability, and as a native solution. The downside is that it requires client support, limited multi-key operation support, and only supports one database.</p> <p>The Redis Cluster solution can be a good fit for you if you need a sharded Redis solution. Typically, people start looking at sharding their Redis deployments when they’ve started to saturate a standalone Redis node with writes and want to spread writes out to multiple nodes.</p> <h2 id="an-async-framework-within-a-single-tweet"><a href="#an-async-framework-within-a-single-tweet" class="header-anchor">#</a> An async &quot;framework&quot; within a single Tweet</h2> <p><a href="https://twitter.com/dabeaz/status/1101912161117528064" target="_blank" rel="noopener noreferrer">twitter.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> select <span class="token keyword">import</span> select
<span class="token keyword">from</span> collections <span class="token keyword">import</span> deque

R<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>W<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>Q<span class="token operator">=</span>deque<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">p</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
 r<span class="token punctuation">,</span>w<span class="token punctuation">,</span>_<span class="token operator">=</span>select<span class="token punctuation">(</span>R<span class="token punctuation">,</span>W<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
 Q<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>R<span class="token punctuation">.</span>pop<span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token keyword">for</span> s <span class="token keyword">in</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>Q<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>W<span class="token punctuation">.</span>pop<span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token keyword">for</span> s <span class="token keyword">in</span> w<span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">go</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
 <span class="token keyword">while</span> Q <span class="token keyword">or</span> p<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">or</span> Q<span class="token punctuation">:</span>
  <span class="token keyword">try</span><span class="token punctuation">:</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span>s<span class="token punctuation">)</span><span class="token punctuation">,</span>w<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">(</span>t<span class="token punctuation">:</span><span class="token operator">=</span>Q<span class="token punctuation">.</span>popleft<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">,</span>t
  <span class="token keyword">except</span> StopIteration<span class="token punctuation">:</span><span class="token keyword">pass</span>
</code></pre></div><p>Usage:</p> <div class="language-python extra-class"><pre class="language-python"><code>Q<span class="token punctuation">.</span>append<span class="token punctuation">(</span>coro<span class="token punctuation">)</span>
go<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="the-right-way-to-bundle-your-assets-for-faster-sites-over-http-2"><a href="#the-right-way-to-bundle-your-assets-for-faster-sites-over-http-2" class="header-anchor">#</a> The Right Way to Bundle Your Assets for Faster Sites over HTTP/2</h2> <p><a href="https://medium.com/@asyncmax/the-right-way-to-bundle-your-assets-for-faster-sites-over-http-2-437c37efe3ff" target="_blank" rel="noopener noreferrer">medium.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>This article goes over the basics of HTTP/2 and shows benchmark data to support some simple development guidelines to ensure that your site is optimized for HTTP/2.</p> <p>Though concatenation has been considered to be bad in a HTTP/2 environment because HTTP/2 is designed to transfer multiple small files simultaneously without much overhead. The benchmark test showed that asset concatenation is still good for improving loading performance in HTTP/2.</p> <p>Key Takeaways:</p> <ul><li>Always concatenate files into several bundles.</li> <li>Consider HTTP/1.1 compatibility.</li> <li>Use image sprites.</li> <li>Carefully use data URIs.</li></ul> <h2 id="openssl-strategic-architecture"><a href="#openssl-strategic-architecture" class="header-anchor">#</a> OpenSSL Strategic Architecture</h2> <p><a href="https://www.openssl.org/docs/OpenSSLStrategicArchitecture.html" target="_blank" rel="noopener noreferrer">www.openssl.org<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>This document outlines the OpenSSL strategic architecture. Below is the as-is architecture.</p> <p><img src="https://www.openssl.org/docs/images/AsIsComponent.png" alt="openssl components"></p> <p>Below is the to-be architecture.</p> <p><img src="https://www.openssl.org/docs/images/ToBeComponent.png" alt="openssl components"></p> <h2 id="understanding-real-world-concurrency-bugs-in-go"><a href="#understanding-real-world-concurrency-bugs-in-go" class="header-anchor">#</a> Understanding Real-World Concurrency Bugs in Go</h2> <p><a href="https://songlh.github.io/paper/go-study.pdf" target="_blank" rel="noopener noreferrer">songlh.github.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>The paper conducts the first comprehensive, empirical study on 171 real-world Go concurrency bugs from two orthogonal dimensions.</p> <ul><li>Root Causes of Blocking Bugs:
<ul><li>(mis)Protection of Shared Memory.</li> <li>Misuse of Message Passing.</li></ul></li> <li>Root Causes of Non-blocking Bugs:</li> <li>Failing to Protect Shared Memory.</li> <li>Errors during Message Passing.</li></ul> <h2 id="best-deep-learning-books-updated-for-2019"><a href="#best-deep-learning-books-updated-for-2019" class="header-anchor">#</a> Best Deep Learning Books: Updated for 2019</h2> <p><a href="https://blog.floydhub.com/best-deep-learning-books-updated-for-2019/" target="_blank" rel="noopener noreferrer">blog.floydhub.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li>Deep Learning by Ian Goodfellow, Yoshua Bengio, Aaron Courville</li> <li>Grokking Deep Learning by Andrew W. Trask</li> <li>Deep Learning with Python by Francois Chollet</li> <li>Hands-On Machine Learning with Scikit-Learn and TensorFlow by Aurélien Géron</li> <li>The Hundred-Page Machine Learning Book by Andriy Burkov</li> <li>Reinforcement Learning: An Introduction (2nd Edition) by Richard S. Sutton, Andrew G. Barto</li> <li>Deep Reinforcement Learning Hands-On by Maxim Lapan</li> <li>Learning From Data by Yaser S. Abu-Mostafa, Malik Magdon-Ismail, Hsuan-Tien Lin.</li> <li>The Book of Why by Judea Pearl, Dana Mackenzie.</li> <li>Machine Learning Yearning by Andrew Ng.</li> <li>Interpretable Machine Learning by Christoph Molnar.</li> <li>Neural Networks and Deep Learning by Michael Nielsen.</li></ul> <h2 id="your-migrations-are-bad-and-you-should-feel-bad"><a href="#your-migrations-are-bad-and-you-should-feel-bad" class="header-anchor">#</a> Your migrations are bad, and you should feel bad</h2> <p><a href="https://djrobstep.com/talks/your-migrations-are-bad-and-you-should-feel-bad" target="_blank" rel="noopener noreferrer">djrobstep.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>People invented versioned migrations to handle database schema changes, such as Rails migrations, Django migrations, Alembic migrations, Go migrations, etc etc, although nobody really cares about old versions. We can simplify it to:</p> <div class="language- extra-class"><pre class="language-text"><code>Empty schema → Dev schema → Live schema
</code></pre></div><p>The author introduced a tool <code>migra</code> that can generate diffs for your database schemas. Every time there is a change, use the tool generate a diff and apply that to the database. No files, no version numbers: One operation.</p> <h2 id="how-discord-scaled-elixir-to-5-000-000-concurrent-users"><a href="#how-discord-scaled-elixir-to-5-000-000-concurrent-users" class="header-anchor">#</a> How Discord Scaled Elixir to 5,000,000 Concurrent Users</h2> <p><a href="https://blog.discordapp.com/scaling-elixir-f9b8e1e7c29b" target="_blank" rel="noopener noreferrer">blog.discordapp.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li>While Discord is rich with features, most of it boils down to pub/sub. Users connect to a WebSocket and spin up a session process (a GenServer), which then communicates with remote Erlang nodes that contain guild (internal for a “Discord Server”) processes (also GenServers). When anything is published in a guild, it is fanned out to every session connected to it. When meet scaling problem, Erlang processes are effectively single threaded, and the only way to parallelize the work is to shard them. <a href="https://github.com/hammerandchisel/manifold" target="_blank" rel="noopener noreferrer">Manifold<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> distributes the work of sending messages to the remote nodes of the PIDs (Erlang process identifier), which guarantees that the sending processes at most only calls send/2 equal to the number of involved remote nodes.</li> <li>When using consistent hashing, the Erlang process responsible for controlling the ring would start to get so busy that it would fail to keep up with requests to the ring, and the whole system would become overloaded. The solution was to introduce <a href="https://github.com/mochi/mochiweb/blob/master/src/mochiglobal.erl" target="_blank" rel="noopener noreferrer">mochiglobal<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, a module that exploits a feature of the VM: if Erlang sees a function that always returns the same constant data, it puts that data into a read-only shared heap that processes can access without copying the data.</li> <li>Use <code>:ets.update_counter/4</code>, which performs atomic conditional increment operations on a number inside an ETS key.</li></ul> <h2 id="cloud-native-application-architecture"><a href="#cloud-native-application-architecture" class="header-anchor">#</a> Cloud Native Application Architecture</h2> <p><a href="https://medium.com/walmartlabs/cloud-native-application-architecture-a84ddf378f82" target="_blank" rel="noopener noreferrer">medium.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Cloud Native Design Principles</p> <ul><li>Designed As Loosely Coupled Microservices</li> <li>Developed With Best-of-breed Languages And Frameworks</li> <li>Centred Around APIs For Interaction And Collaboration</li> <li>Stateless And Massively Scalable</li> <li>Resiliency At The Core Of the Architecture</li> <li>Packaged As Lightweight Containers And Orchestrated</li> <li>Elastic — Dynamic scale-up/down</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/soasme/enqueuezero/edit/master/techshack.weekly/2019-09.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.26662bcd.js" defer></script><script src="/assets/js/6.d2240214.js" defer></script><script src="/assets/js/157.12f4dc82.js" defer></script>
  </body>
</html>

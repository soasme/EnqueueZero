<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Timezone | Enqueue Zero</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Enqueue Zero is publishing code principles.">
    
    <link rel="preload" href="/assets/css/0.styles.472f46d1.css" as="style"><link rel="preload" href="/assets/js/app.26662bcd.js" as="script"><link rel="preload" href="/assets/js/6.d2240214.js" as="script"><link rel="preload" href="/assets/js/106.9cf7fa00.js" as="script"><link rel="prefetch" href="/assets/js/1.f7157d85.js"><link rel="prefetch" href="/assets/js/10.bb89159d.js"><link rel="prefetch" href="/assets/js/100.696fc0f0.js"><link rel="prefetch" href="/assets/js/101.a1c3f849.js"><link rel="prefetch" href="/assets/js/102.bfa743be.js"><link rel="prefetch" href="/assets/js/103.694af51d.js"><link rel="prefetch" href="/assets/js/104.c21c3757.js"><link rel="prefetch" href="/assets/js/105.d5841585.js"><link rel="prefetch" href="/assets/js/107.1ec93d70.js"><link rel="prefetch" href="/assets/js/108.0b8763b2.js"><link rel="prefetch" href="/assets/js/109.e7196d2e.js"><link rel="prefetch" href="/assets/js/11.e30c030f.js"><link rel="prefetch" href="/assets/js/110.a6dd1b2d.js"><link rel="prefetch" href="/assets/js/111.77cce519.js"><link rel="prefetch" href="/assets/js/112.70165eb2.js"><link rel="prefetch" href="/assets/js/113.3fa50ee2.js"><link rel="prefetch" href="/assets/js/114.31c8c10f.js"><link rel="prefetch" href="/assets/js/115.af04f95c.js"><link rel="prefetch" href="/assets/js/116.457c2566.js"><link rel="prefetch" href="/assets/js/117.c43e188a.js"><link rel="prefetch" href="/assets/js/118.8cf2c53e.js"><link rel="prefetch" href="/assets/js/119.bd688ff9.js"><link rel="prefetch" href="/assets/js/12.3e81efff.js"><link rel="prefetch" href="/assets/js/120.dc1164f5.js"><link rel="prefetch" href="/assets/js/121.f8bd20ba.js"><link rel="prefetch" href="/assets/js/122.58c1b292.js"><link rel="prefetch" href="/assets/js/123.3ab17f6c.js"><link rel="prefetch" href="/assets/js/124.79a8fefc.js"><link rel="prefetch" href="/assets/js/125.bb87430b.js"><link rel="prefetch" href="/assets/js/126.de1343ef.js"><link rel="prefetch" href="/assets/js/127.d66cf797.js"><link rel="prefetch" href="/assets/js/128.c2ce57e8.js"><link rel="prefetch" href="/assets/js/129.e0515a98.js"><link rel="prefetch" href="/assets/js/13.3ae4e3c9.js"><link rel="prefetch" href="/assets/js/130.b198674a.js"><link rel="prefetch" href="/assets/js/131.b44003aa.js"><link rel="prefetch" href="/assets/js/132.9ce0efcd.js"><link rel="prefetch" href="/assets/js/133.c5ff5656.js"><link rel="prefetch" href="/assets/js/134.27dfad96.js"><link rel="prefetch" href="/assets/js/135.1a6c5976.js"><link rel="prefetch" href="/assets/js/136.a40474aa.js"><link rel="prefetch" href="/assets/js/137.337a587b.js"><link rel="prefetch" href="/assets/js/138.c0a1d2f5.js"><link rel="prefetch" href="/assets/js/139.789324e5.js"><link rel="prefetch" href="/assets/js/14.6745f1f0.js"><link rel="prefetch" href="/assets/js/140.0f6046b7.js"><link rel="prefetch" href="/assets/js/141.ca8677a9.js"><link rel="prefetch" href="/assets/js/142.7cd41612.js"><link rel="prefetch" href="/assets/js/143.4e06cdc6.js"><link rel="prefetch" href="/assets/js/144.30a011d9.js"><link rel="prefetch" href="/assets/js/145.616e4d0c.js"><link rel="prefetch" href="/assets/js/146.9f8b8212.js"><link rel="prefetch" href="/assets/js/147.aa478e29.js"><link rel="prefetch" href="/assets/js/148.3114d5cd.js"><link rel="prefetch" href="/assets/js/149.f8711773.js"><link rel="prefetch" href="/assets/js/15.2f559067.js"><link rel="prefetch" href="/assets/js/150.66da4609.js"><link rel="prefetch" href="/assets/js/151.9a722cf9.js"><link rel="prefetch" href="/assets/js/152.c625b811.js"><link rel="prefetch" href="/assets/js/153.6f67989f.js"><link rel="prefetch" href="/assets/js/154.8d3771fd.js"><link rel="prefetch" href="/assets/js/155.db2eb76a.js"><link rel="prefetch" href="/assets/js/156.d5dd02f5.js"><link rel="prefetch" href="/assets/js/157.12f4dc82.js"><link rel="prefetch" href="/assets/js/158.106505d8.js"><link rel="prefetch" href="/assets/js/159.a2dbf072.js"><link rel="prefetch" href="/assets/js/16.b9adde67.js"><link rel="prefetch" href="/assets/js/160.3145ef30.js"><link rel="prefetch" href="/assets/js/161.25da45f5.js"><link rel="prefetch" href="/assets/js/162.a65448a4.js"><link rel="prefetch" href="/assets/js/163.f07fa25d.js"><link rel="prefetch" href="/assets/js/164.467c6d5c.js"><link rel="prefetch" href="/assets/js/17.01834c30.js"><link rel="prefetch" href="/assets/js/18.9956aed9.js"><link rel="prefetch" href="/assets/js/19.d99e88b1.js"><link rel="prefetch" href="/assets/js/2.0d8a973f.js"><link rel="prefetch" href="/assets/js/20.8ce58444.js"><link rel="prefetch" href="/assets/js/21.8e95e990.js"><link rel="prefetch" href="/assets/js/22.46dc304c.js"><link rel="prefetch" href="/assets/js/23.1ad9ea02.js"><link rel="prefetch" href="/assets/js/24.32437043.js"><link rel="prefetch" href="/assets/js/25.e3764fbe.js"><link rel="prefetch" href="/assets/js/26.e4eec541.js"><link rel="prefetch" href="/assets/js/27.54c6db2e.js"><link rel="prefetch" href="/assets/js/28.8dc6cb87.js"><link rel="prefetch" href="/assets/js/29.4d3624fc.js"><link rel="prefetch" href="/assets/js/3.dd706b41.js"><link rel="prefetch" href="/assets/js/30.c4d8ab26.js"><link rel="prefetch" href="/assets/js/31.d28673cb.js"><link rel="prefetch" href="/assets/js/32.51d979f3.js"><link rel="prefetch" href="/assets/js/33.7359ba2a.js"><link rel="prefetch" href="/assets/js/34.c3f19c8f.js"><link rel="prefetch" href="/assets/js/35.1613123f.js"><link rel="prefetch" href="/assets/js/36.5a82821a.js"><link rel="prefetch" href="/assets/js/37.b95059f5.js"><link rel="prefetch" href="/assets/js/38.67082dba.js"><link rel="prefetch" href="/assets/js/39.f9e197d7.js"><link rel="prefetch" href="/assets/js/4.29da6077.js"><link rel="prefetch" href="/assets/js/40.309fa7cc.js"><link rel="prefetch" href="/assets/js/41.12e2904c.js"><link rel="prefetch" href="/assets/js/42.60c54b7c.js"><link rel="prefetch" href="/assets/js/43.93d5d55c.js"><link rel="prefetch" href="/assets/js/44.c7972aa3.js"><link rel="prefetch" href="/assets/js/45.0e7f822e.js"><link rel="prefetch" href="/assets/js/46.6646cc92.js"><link rel="prefetch" href="/assets/js/47.ef2ff153.js"><link rel="prefetch" href="/assets/js/48.aba7bfcd.js"><link rel="prefetch" href="/assets/js/49.76ce0dd5.js"><link rel="prefetch" href="/assets/js/50.bfd5ce8a.js"><link rel="prefetch" href="/assets/js/51.78e9f09c.js"><link rel="prefetch" href="/assets/js/52.d84bf105.js"><link rel="prefetch" href="/assets/js/53.63ae3ba7.js"><link rel="prefetch" href="/assets/js/54.c13091c1.js"><link rel="prefetch" href="/assets/js/55.0fd04d7d.js"><link rel="prefetch" href="/assets/js/56.30c3e036.js"><link rel="prefetch" href="/assets/js/57.88f684ac.js"><link rel="prefetch" href="/assets/js/58.b0273999.js"><link rel="prefetch" href="/assets/js/59.2bd4017a.js"><link rel="prefetch" href="/assets/js/60.cb5e31cd.js"><link rel="prefetch" href="/assets/js/61.78c24020.js"><link rel="prefetch" href="/assets/js/62.ed7bb122.js"><link rel="prefetch" href="/assets/js/63.6dc67c03.js"><link rel="prefetch" href="/assets/js/64.ba48b753.js"><link rel="prefetch" href="/assets/js/65.95fb6a85.js"><link rel="prefetch" href="/assets/js/66.cf7b0f4b.js"><link rel="prefetch" href="/assets/js/67.135e02b9.js"><link rel="prefetch" href="/assets/js/68.692785cb.js"><link rel="prefetch" href="/assets/js/69.71acc6d9.js"><link rel="prefetch" href="/assets/js/7.e6dfaa84.js"><link rel="prefetch" href="/assets/js/70.9330fa95.js"><link rel="prefetch" href="/assets/js/71.323daa7b.js"><link rel="prefetch" href="/assets/js/72.0a1f652c.js"><link rel="prefetch" href="/assets/js/73.58f8d79d.js"><link rel="prefetch" href="/assets/js/74.c79161f6.js"><link rel="prefetch" href="/assets/js/75.ebdc4060.js"><link rel="prefetch" href="/assets/js/76.d7c6a683.js"><link rel="prefetch" href="/assets/js/77.1c74ae52.js"><link rel="prefetch" href="/assets/js/78.1435c08f.js"><link rel="prefetch" href="/assets/js/79.550e023e.js"><link rel="prefetch" href="/assets/js/8.9d730b63.js"><link rel="prefetch" href="/assets/js/80.0fcde753.js"><link rel="prefetch" href="/assets/js/81.54ad9ad6.js"><link rel="prefetch" href="/assets/js/82.106f6213.js"><link rel="prefetch" href="/assets/js/83.eb1f77af.js"><link rel="prefetch" href="/assets/js/84.dc27d377.js"><link rel="prefetch" href="/assets/js/85.952de193.js"><link rel="prefetch" href="/assets/js/86.849ef641.js"><link rel="prefetch" href="/assets/js/87.ba839e63.js"><link rel="prefetch" href="/assets/js/88.55c67120.js"><link rel="prefetch" href="/assets/js/89.2b92f963.js"><link rel="prefetch" href="/assets/js/9.4f13d7d8.js"><link rel="prefetch" href="/assets/js/90.599d1ee9.js"><link rel="prefetch" href="/assets/js/91.ca49947d.js"><link rel="prefetch" href="/assets/js/92.fee804a1.js"><link rel="prefetch" href="/assets/js/93.38edda54.js"><link rel="prefetch" href="/assets/js/94.2a5af489.js"><link rel="prefetch" href="/assets/js/95.694d7882.js"><link rel="prefetch" href="/assets/js/96.dbae4a47.js"><link rel="prefetch" href="/assets/js/97.f635273c.js"><link rel="prefetch" href="/assets/js/98.4b13da17.js"><link rel="prefetch" href="/assets/js/99.1c228ad5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.472f46d1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Enqueue Zero</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/soasme/enqueuezero" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/soasme/enqueuezero" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="timezone"><a href="#timezone" class="header-anchor">#</a> Timezone</h1> <p></p><div class="table-of-contents"><ul><li><a href="#context">Context</a></li><li><a href="#overview">Overview</a></li><li><a href="#solutions">Solutions</a><ul><li><a href="#the-system-timezone">The System Timezone</a></li><li><a href="#programming-language-libraries">Programming Language Libraries</a></li></ul></li><li><a href="#patterns">Patterns</a><ul><li><a href="#iana">IANA</a></li><li><a href="#timedelta">Timedelta</a></li><li><a href="#daylight-saving-time">Daylight Saving Time</a></li><li><a href="#tz-time-format">TZ time format</a></li><li><a href="#unix-timestamp">Unix Timestamp</a></li></ul></li><li><a href="#conclusion">Conclusion</a></li></ul></div><p></p> <h2 id="context"><a href="#context" class="header-anchor">#</a> Context</h2> <p>As the earth is a sphere, different places in the world will have different clocks. Human invented timezone to split the globe into 24 areas by regions. The UTC or Coordinated Universal Time is the primary time standard by which the world regulates clocks and time.</p> <p>Programmers need to be aware of the timezone and what it means to the time they handle. In this case, the timezone libraries can help to ease the problem.</p> <h2 id="overview"><a href="#overview" class="header-anchor">#</a> Overview</h2> <h2 id="solutions"><a href="#solutions" class="header-anchor">#</a> Solutions</h2> <h3 id="the-system-timezone"><a href="#the-system-timezone" class="header-anchor">#</a> The System Timezone</h3> <p>The program needs to run in an OS, and thus system admin needs to set system timezone first. Almost every OS, such as Windows, macOS, Linux, Android, has an option to set the timezone.</p> <p>Especially in POSIX, you can use command <code>tzselect</code> to set the timezone and use environment variable <code>$TZ</code> to get timezone. The <code>$TZ</code> value is something like <code>America/New_York</code>, or <code>Pacific/Honolulu</code>. In the GNU C Library, the default time zone is like the specification <code>TZ=:/etc/localtime</code> (or <code>TZ=:/usr/local/etc/localtime</code>, depending on how the GNU C Library was configured.</p> <p>Check the manual of <a href="https://www.gnu.org/software/libc/manual/html_node/TZ-Variable.html" target="_blank" rel="noopener noreferrer">TZ-Variable<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h3 id="programming-language-libraries"><a href="#programming-language-libraries" class="header-anchor">#</a> Programming Language Libraries</h3> <p>Language libraries provide similar interfaces to convert time from local time to UTC or other local times in other regions.</p> <p>The time objects can be categorized into timezone-aware and timezone-non-aware objects. A timezone-non-aware time object is usually referred to as local time in the programming context. Some might refer to UTC, while some might refer to local time.</p> <p>Popular timezone libraries are listed below:</p> <ul><li><a href="https://momentjs.com/timezone/docs/" target="_blank" rel="noopener noreferrer">Moment.js timezone<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://dateutil.readthedocs.io/en/stable/tz.html" target="_blank" rel="noopener noreferrer">python-dateutil tz<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>They have similar API form:</p> <div class="language-python extra-class"><pre class="language-python"><code>tzaware_time <span class="token operator">=</span> tz<span class="token punctuation">(</span>time<span class="token punctuation">,</span> IANA_KEY<span class="token punctuation">)</span>
utc_time <span class="token operator">=</span> to_utc<span class="token punctuation">(</span>tzaware_time<span class="token punctuation">)</span>
</code></pre></div><h2 id="patterns"><a href="#patterns" class="header-anchor">#</a> Patterns</h2> <h3 id="iana"><a href="#iana" class="header-anchor">#</a> IANA</h3> <p><a href="https://www.iana.org/time-zones" target="_blank" rel="noopener noreferrer">IANA TZ database<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> contains code and data that represent the history of local time for many representative locations around the globe. It is updated periodically.</p> <p>We need this database because the timezone is not a fixed data. Governments or local policymakers might change the timezone for a region for some reason. For example, the Samoa government changed the timezone from UTC-11 to UTC+13 (daylight saving time from UTC-10 to UTC+14) since 29 Dec 2011.</p> <p>You can find a list of timezones in a POSIX-like system like below:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">ls</span> /usr/share/zoneinfo
+VERSION    CET         Eire        GMT0        Japan       Navajo      Turkey      posixrules
Africa      CST6CDT     Etc         Greenwich   Kwajalein   PRC         UCT         zone.tab
America     Canada      Europe      HST         Libya       PST8PDT     US
Antarctica  Chile       Factory     Hongkong    MET         Pacific     UTC
Arctic      Cuba        GB          Iceland     MST         Poland      Universal
Asia        EET         GB-Eire     Indian      MST7MDT     Portugal    W-SU
Atlantic    EST         GMT         Iran        Mexico      ROC         WET
Australia   EST5EDT     GMT+0       Israel      NZ          ROK         Zulu
Brazil      Egypt       GMT-0       Jamaica     NZ-CHAT     Singapore   iso3166.tab
</code></pre></div><p>Usually, you can get a TZ object by giving an IANA TZ database key. For example, in Python-dateutil, you can get TZ by <code>gettz</code>.</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> gettz<span class="token punctuation">(</span><span class="token string">'Pacific/Kiritimati'</span><span class="token punctuation">)</span>
tzfile<span class="token punctuation">(</span><span class="token string">'/usr/share/zoneinfo/Pacific/Kiritimati'</span><span class="token punctuation">)</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span>tzutc<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">(</span><span class="token number">2018</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">43</span><span class="token punctuation">,</span> <span class="token number">293800</span><span class="token punctuation">,</span> tzinfo<span class="token operator">=</span>tzutc<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="timedelta"><a href="#timedelta" class="header-anchor">#</a> Timedelta</h3> <p>Under the hood, the timezone calculation is merely to add or minus a few hours to the given time based on the timezone setting.</p> <p>For example, for TZ &quot;Asia/Shanghai&quot; you can get a UTC time first, and then apply it to the local TZ for local time:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> datetime<span class="token punctuation">.</span>utcnow<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> timedelta<span class="token punctuation">(</span>hours<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="daylight-saving-time"><a href="#daylight-saving-time" class="header-anchor">#</a> Daylight Saving Time</h3> <p>DST or daylight saving time, sometimes also referred to as summer time in some countries, is a practice of advancing clocks during summer months, so that evening daylight lasts longer. It also means this practice makes timezone a little bit complicated.</p> <p>You can't merely apply time to <code>+timedelta(hours=12)</code> for Pacific/Auckland timezone. In summer time, you have to apply time to <code>+timedelta(hours=13)</code>.</p> <p>Fortunately, the programming language tz libraries would generally handle that for you. All the thing you need to do is to get a timezone by IANA key instead of adding timedelta by yourself.</p> <h3 id="tz-time-format"><a href="#tz-time-format" class="header-anchor">#</a> TZ time format</h3> <p>When people format datetime with timezone into string, ISO8601 might be a good solution. For example, the given time might be in below format:</p> <ul><li><code>&quot;2008-09-15T15:53:00+05:00&quot;</code></li> <li><code>&quot;2008-09-15T15:53:00+0500&quot;</code></li> <li><code>&quot;2008-09-15T15:53:00+05&quot;</code></li> <li><code>&quot;2008-09-15T10:53:00Z&quot;</code></li></ul> <p>The <code>Z</code> here means UTC.</p> <h3 id="unix-timestamp"><a href="#unix-timestamp" class="header-anchor">#</a> Unix Timestamp</h3> <p>When converting in between timezone and datetime, you need to be aware of the relationship between each other. For example, in Python, you can convert a timestamp into utc time tuple or local time tuple.</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> time

<span class="token comment"># timestamp to time tuple in UTC</span>
timestamp <span class="token operator">=</span> <span class="token number">1226527167.595983</span>
utc_time_tuple <span class="token operator">=</span> time<span class="token punctuation">.</span>gmtime<span class="token punctuation">(</span>timestamp<span class="token punctuation">)</span>
<span class="token keyword">print</span> <span class="token builtin">repr</span><span class="token punctuation">(</span>utc_time_tuple<span class="token punctuation">)</span>

<span class="token comment"># timestamp to time tuple in local time</span>
timestamp <span class="token operator">=</span> <span class="token number">1226527167.595983</span>
local_time_tuple <span class="token operator">=</span> time<span class="token punctuation">.</span>localtime<span class="token punctuation">(</span>timestamp<span class="token punctuation">)</span>
<span class="token keyword">print</span> <span class="token builtin">repr</span><span class="token punctuation">(</span>local_time_tuple<span class="token punctuation">)</span>
</code></pre></div><p>Check <a href="https://www.saltycrane.com/blog/2008/11/python-datetime-time-conversions/" target="_blank" rel="noopener noreferrer">Python datetime / time conversions<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="conclusion"><a href="#conclusion" class="header-anchor">#</a> Conclusion</h2> <p>Someone believes the time is the essence of the programming, and in this way it is.</p> <p>When handling the time, don't forget to check the system settings. In programming, choosing a good library can save you time.</p> <p>It's a good practice to store time in UTC as timezone into the database all the time. You might want to convert them into timezone-aware objects only when you need to handle user requests or display them.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/soasme/enqueuezero/edit/master/concepts/timezone.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.26662bcd.js" defer></script><script src="/assets/js/6.d2240214.js" defer></script><script src="/assets/js/106.9cf7fa00.js" defer></script>
  </body>
</html>
